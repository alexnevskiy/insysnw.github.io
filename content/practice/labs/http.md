+++
title = "HTTP"
weight = 2
draft = true
[taxonomies]
categories = ["Лабораторная"]
+++

# Адресная строка в браузере не эквивалентна запросу
Для практического знакомства с протоколом мы сами напишем запрос.
Так как HTTP начинал свой путь как текст в TCP сессии, мы используем утилиту `telnet`, открывающую TCP сессии и позволяющую писать в и читать из двунаправленного потока.
Наша задача получить страницу по адресу [http://academy.ejiek.com/about\_http/page.html](http://academy.ejiek.com/about_http/page.html).
В качестве входных параметров `telnet` принимает адрес сервера и порт.
Адрес может быть как IP адресом, так и доменным именем.
Порт для HTTP - 80.

В командной строке/терминале:
```bash
telnet academy.ejiek.com 80
```
Сетевое общение начинается на разрешении доменного имени на стороне клиента (самим `telnet`) и более не используется.
`telnet` открывает TCP сессию.
Если сессия успешно открылась, мы увидим следующие строки:
```
Trying 188.242.22.225...
Connected to academy.ejiek.com.
Escape character is '^]'.
```
На данном этапе мы имеем TCP сессию, у которой открыты потоки в оба направления, но они пусты.
Это время для написания запроса, `telnet` ждёт ввода и отправит его по нажатию `Enter`.
```bash
GET /about_http/page.html
```
Это полноценных HTTP запрос.
Он имеет тип `GET` и запрашивает ресурс по пути `/about_http/page.html`.
Так как мы никак не указали версию протокола, сервер использует минимальную поддерживаемую **0.9**.
В ней поддерживается всего один тип ресурсов - текст.
В случае успешного запроса мы увидим:
```
<html>
  <p>In the first age</p>
  <p>In the first 18 tags</p>
  <p>When the hypertext first lenghtened</p>
  <p>One stood</p>
</html>
Connection closed by foreign host.
```
Всё, кроме последней строчки - ответ, а последняя строчка - сообщение от самого `telnet` о том, что сервер закрыл TCP сессию.
Это единственное поведение сервера в данной версии протокола. 

# Современные версии HTTP предусматривают дублирование строки запроса

# Способы передачи информации
## Путь

## Вопросительный знак
Ранее в лекциях мы упоминали, что поиск в HTTP был предусмотрен с самого начала (версии 0.9) и имел формат:
```
address_of_index ? keywordlist
```

где `address_of_index` - путь до специального индексного файла на сервере, `?` - разделитель, `keywordlist` - список ключевых слов, разделённых символом `+`.
Проблема такого поиска в том, что это поиск по конкретному сайту и только в том случае, если специальный индексный файл был создан авторами.

Это не работающий, но корректно составленный, пример поиска `rick roll`'a на данном сайте:
```
https://insysnw.github.io/index.file?rick+roll
```
А не работает он потому, что специальный индексный файл (в данном случае `/index.file` нами не составлен).

Давайте посмотрим, как будет выглядеть поисковый запрос в современном поисковике:

Для этого перейдём на [https://duckduckgo.com/](https://duckduckgo.com/)
и наберём `rick roll` и выполним поиск:
![скриншот запроса]()

Теперь обратим внимание на формат адресной строки после выполнения запроса:
```
https://duckduckgo.com/?q=rick+roll&t=h_&ia=web
```

Адрес самого поисковика остался неизменен `https://duckduckgo.com/` и путь до специального файла отсутствует, а строка поиска не соответствует ранее упомянутому формату:

```
?q=rick+roll&t=h_&ia=web
```

Теперь после `?` мы видим строку формата `Имя переменной` `=` `значение`, `&` в качестве разделителя переменных и `+` в качестве разделителя слов в рамках одной переменной.
Так последний запрос состоит из трёх переменных:

* `q` со значением `rick roll`
* `t` со значением `h_`
* `ia` со значением `web`

Это формат используемый для передачи метаданных.
В примере с поисковиком `q` очень распространённое название переменной для поискового запроса, а остальные параметры нужны поисковику, чтобы **TODO** оправдать поисковик.

Проверим популярность переменной `q` в других поисковиках:

[ya.ru?q=rick+roll](https://ya.ru?q=rick+roll), [google.ru?=rick+roll](https://google.ru?q=rick+roll), [bing.com?=rock+roll](https://bing.com?q=rock+roll).
Каждый из них преобразует запрос к своему формату, но каждый поймёт, что мы от него хотели.

Од

## Тело запроса

# Коды состояния

# Заголовки
##User Agent
